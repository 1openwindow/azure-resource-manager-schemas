{
  "id": "https://schema.management.azure.com/schemas/2018-10-01-preview/Microsoft.Peering.json#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Microsoft.Peering",
  "description": "Microsoft Peering Resource Types",
  "resourceDefinitions": {
    "peerings": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Peering/peerings"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-10-01-preview"
          ]
        },
        "sku": {
          "oneOf": [
            {
              "$ref": "#/definitions/PeeringSku"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "The SKU that defines the tier and type of the peering."
        },
        "kind": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Direct",
                "Exchange",
                "Partner"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the kind."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/PeeringProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering properties."
        },
        "location": {
          "type": "string",
          "description": "Gets or sets the location."
        },
        "eTag": {
          "type": "string",
          "description": "Gets or sets the entity tag. Not set by frontend (readonly by user)"
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the tags."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/peerings_prefixes_childResource"
              },
              {
                "$ref": "#/definitions/peerings_bgpCommunityLists_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion",
        "properties"
      ],
      "description": "Microsoft.Peering/peerings"
    },
    "peerings_bgpCommunityLists": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Peering/peerings/bgpCommunityLists"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-10-01-preview"
          ]
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion"
      ],
      "description": "Microsoft.Peering/peerings/bgpCommunityLists"
    },
    "peerings_prefixes": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Peering/peerings/prefixes"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-10-01-preview"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/PeeringPrefixProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering prefix properties."
        },
        "location": {
          "type": "string",
          "description": "Gets or sets the location."
        },
        "eTag": {
          "type": "string",
          "description": "Gets or sets the entity tag. Not set by frontend (readonly by user)"
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the tags."
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion",
        "properties"
      ],
      "description": "Microsoft.Peering/peerings/prefixes"
    }
  },
  "definitions": {
    "BgpCommunity": {
      "type": "object",
      "properties": {
        "community": {
          "type": "string",
          "description": "Gets or sets the community."
        },
        "metro": {
          "type": "string",
          "description": "Gets or sets the metro."
        }
      },
      "description": "The BGP community class."
    },
    "BgpSession": {
      "type": "object",
      "properties": {
        "sessionPrefixV4": {
          "type": "string",
          "description": "Gets or sets the IP v4 session prefix. Sample formats: \"192.168.1.0/31\"; \"192.168.1.0/30\".\r\nSessionPrefixV4 ends with 00 or 11, Peer will end with 01 and Microsoft will end with 10\r\nSessionPrefixV4 ends with 01 or 10, Peer will match sessionPrefix and Microsoft will be inverse\r\nSessionPrefixV4 ends with 0 or 1 (/31), Peer will match sessionPrefix and Microsoft will be inverse"
        },
        "sessionPrefixV6": {
          "type": "string",
          "description": "Gets or sets the IP v6 session prefix. Sample formats: \"fd00::0/127\"; \"fd00::0/126\""
        },
        "microsoftSessionIPv4Address": {
          "type": "string",
          "description": "Gets derived value from SessionIP, or custom value if set."
        },
        "microsoftSessionIPv6Address": {
          "type": "string",
          "description": "Gets derived value from SessionIP, or custom value if set."
        },
        "peerSessionIPv4Address": {
          "type": "string",
          "description": "Gets derived value from SessionIP, or custom value if set."
        },
        "peerSessionIPv6Address": {
          "type": "string",
          "description": "Gets derived value from SessionIP, or custom value if set."
        },
        "sessionStateV4": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "Idle",
                "Connect",
                "Active",
                "OpenSent",
                "OpenConfirm",
                "Established",
                "PendingAdd",
                "PendingUpdate",
                "PendingRemove"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the IP v4 BGP Session state. Not set by frontend (readonly to user)."
        },
        "sessionStateV6": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "Idle",
                "Connect",
                "Active",
                "OpenSent",
                "OpenConfirm",
                "Established",
                "PendingAdd",
                "PendingUpdate",
                "PendingRemove"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the IP v6 BGP Session state. Not set by frontend (readonly to user)."
        },
        "maxPrefixesAdvertisedV4": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the Max Prefix Advertised v4. Optionally set by frontend, default to 20,000 (readonly to user)"
        },
        "maxPrefixesAdvertisedV6": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the Max Prefix Advertised v6. Optionally set by frontend, default to 20,000 (readonly to user)"
        },
        "md5AuthenticationKey": {
          "type": "string",
          "description": "Gets or sets the MD5 authentication key. Optionally set by frontend, default to empty string (readonly to user)"
        }
      },
      "description": "The peering session configuration class."
    },
    "DirectConnection": {
      "type": "object",
      "properties": {
        "bandwidthInMbps": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the bandwidth in Mbps."
        },
        "peeringDBFacilityId": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the facility id. Set by frontend on add. Cannot be updated."
        },
        "connectionState": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "PendingApproval",
                "Approved",
                "ProvisioningStarted",
                "ProvisioningFailed",
                "ProvisioningCompleted",
                "Validating",
                "Active"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "The state of the connection with Microsoft."
        },
        "bgpSession": {
          "oneOf": [
            {
              "$ref": "#/definitions/BgpSession"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the BGP session."
        }
      },
      "description": "The peering session configuration class."
    },
    "ExchangeConnection": {
      "type": "object",
      "properties": {
        "peeringDBFacilityId": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the facility id. Set by frontend on add. Cannot be updated."
        },
        "connectionState": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "PendingApproval",
                "Approved",
                "ProvisioningStarted",
                "ProvisioningFailed",
                "ProvisioningCompleted",
                "Validating",
                "Active"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "The state of the connection with Microsoft."
        },
        "bgpSession": {
          "oneOf": [
            {
              "$ref": "#/definitions/BgpSession"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the BGP session."
        }
      },
      "description": "The peering session configuration class."
    },
    "PeeringPrefix": {
      "type": "object",
      "properties": {
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/PeeringPrefixProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering prefix properties."
        },
        "location": {
          "type": "string",
          "description": "Gets or sets the location."
        },
        "eTag": {
          "type": "string",
          "description": "Gets or sets the entity tag. Not set by frontend (readonly by user)"
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the tags."
        }
      },
      "description": "The peering prefix class."
    },
    "PeeringPrefixProperties": {
      "type": "object",
      "properties": {
        "prefix": {
          "type": "string",
          "description": "Gets or sets the prefix."
        },
        "validationState": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "Invalid",
                "Verified",
                "Failed",
                "Pending",
                "Unknown"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the prefix validation state."
        },
        "learnedType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "ViaPartner",
                "ViaSession"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the prefix path."
        },
        "provisioningState": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Succeeded",
                "Updating",
                "Deleting",
                "Failed"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the provisioning state. Not set by frontend (readonly by user)."
        }
      },
      "description": "The peering prefix properties class."
    },
    "PeeringProperties": {
      "type": "object",
      "properties": {
        "direct": {
          "oneOf": [
            {
              "$ref": "#/definitions/PeeringPropertiesDirect"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering direct properties."
        },
        "partner": {
          "oneOf": [
            {
              "$ref": "#/definitions/PeeringPropertiesPartner"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering carrier properties."
        },
        "exchange": {
          "oneOf": [
            {
              "$ref": "#/definitions/PeeringPropertiesExchange"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering exchange properties."
        },
        "peeringLocation": {
          "type": "string",
          "description": "Gets or sets the peering location."
        },
        "provisioningState": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Succeeded",
                "Updating",
                "Deleting",
                "Failed"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the provisioning state. Not set by frontend (readonly by user)."
        }
      },
      "description": "The peering properties class."
    },
    "PeeringPropertiesDirect": {
      "type": "object",
      "properties": {
        "connections": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/DirectConnection"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the list of peering connections."
        },
        "useForPartnerPeering": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets a value indicating whether or not to use this for partner peering service."
        }
      },
      "description": "The peering properties direct class."
    },
    "PeeringPropertiesExchange": {
      "type": "object",
      "properties": {
        "connections": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ExchangeConnection"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the primary session configuration."
        },
        "bgpCommunities": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/BgpCommunity"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the BGP communities. Set not by AddOrUpdate (hidden to user in AddOrUpdate)"
        }
      },
      "description": "The peering exchange properties class."
    },
    "PeeringPropertiesPartner": {
      "type": "object",
      "properties": {
        "partnerName": {
          "type": "string",
          "description": "Gets or sets the carrier name."
        },
        "serviceTag": {
          "type": "string",
          "description": "Gets or sets the service tag. Not set by frontend (readonly to user)"
        },
        "prefixes": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/PeeringPrefix"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the list of prefixes. Set not by AddOrUpdate (hidden to user in AddOrUpdate)"
        }
      },
      "description": "The peering properties carrier class."
    },
    "peerings_bgpCommunityLists_childResource": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "bgpCommunityLists"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-10-01-preview"
          ]
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion"
      ],
      "description": "Microsoft.Peering/peerings/bgpCommunityLists"
    },
    "peerings_prefixes_childResource": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "prefixes"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-10-01-preview"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/PeeringPrefixProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering prefix properties."
        },
        "location": {
          "type": "string",
          "description": "Gets or sets the location."
        },
        "eTag": {
          "type": "string",
          "description": "Gets or sets the entity tag. Not set by frontend (readonly by user)"
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the tags."
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion",
        "properties"
      ],
      "description": "Microsoft.Peering/peerings/prefixes"
    },
    "PeeringSku": {
      "type": "object",
      "properties": {
        "name": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Basic_Exchange_Free",
                "Basic_Direct_Free",
                "Premium_Direct_Free",
                "Premium_Partner_Metered",
                "Premium_Exchange_Metered"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering SKU name."
        },
        "tier": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Basic",
                "Premium"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering SKU tier."
        },
        "family": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Direct",
                "Exchange",
                "Partner"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering SKU family."
        },
        "size": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Free",
                "Metered",
                "Unlimited"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the peering SKU size."
        }
      },
      "description": "The peering SKU class."
    }
  }
}
