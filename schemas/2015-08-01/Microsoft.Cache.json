{
    "id": "http://schema.management.azure.com/schemas/2015-08-01/Microsoft.Cache.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Microsoft.Cache",
    "description": "Microsoft Cache Resource Types",
    "definitions": {
        "virtualNetworkId": {
            "type": "string",
            "pattern": "^/subscriptions/[^/]*/resourceGroups/[^/]*/providers/Microsoft.ClassicNetwork/virtualNetworks/[^/]*$",
            "description": "The resource id of an Azure Classic Virtual Network"
        },
        "ipV4Address": { 
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+\\.\\d+$",
            "description": "An IP address in a Virtual Network"
        },
        "Redis": {
            "type": "object",
            "properties": {
                "type": {
                    "enum": [
                        "Microsoft.Cache/Redis"
                    ]
                },
                "apiVersion": {
                    "enum": [
                        "2015-08-01"
                    ]
                },
                "properties": {
                    "type": "object",
                    "properties": {
                        "sku": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "oneOf": [
                                        {
                                            "enum": [
                                                "Basic",
                                                "Standard",
                                                "Premium"
                                            ]
                                        },
                                        {
                                            "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
                                        }
                                    ],
                                    "description": "Microsoft.Cache/Redis: sku/name"
                                },
                                "family": {
                                    "oneOf": [
                                        {
                                            "enum": [
                                                "C",
                                                "P"
                                            ]
                                        },
                                        {
                                            "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
                                        }
                                    ],
                                    "description": "Microsoft.Cache/Redis: sku/size"
                                },
                                "capacity": {
                                    "oneOf": [
                                        {
                                            "type": "integer"
                                        },
                                        {
                                            "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
                                        }
                                    ],
                                    "description": "Microsoft.Cache/Redis: sku/capacity"
                                }
                            },
                            "required": [
                                "name",
                                "family",
                                "capacity"
                            ]
                        },
                        "shardCount": {
                            "oneOf": [
                                {
                                    "type": "integer"
                                },
                                {
                                    "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
                                }
                            ],
                            "description": "Microsoft.Cache/Redis: (if using Clustering) count of shards in Redis cluster"
                        },
                        "enableNonSslPort": {
                            "oneOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
                                }
                            ],
                            "description": "Microsoft.Cache/Redis enableNonSslPort. Enables less secure direct access to redis on port 6379 WITHOUT SSL tunneling."
                        },
                        "redisConfiguration": {
                            "type": "object"
                        },
                        "virtualNetwork": {
                            "oneOf": [
                                {
                                    "$ref": "#/definitions/virtualNetworkId"
                                },
                                {
                                    "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
                                }
                            ],
                            "description": "Microsoft.Cache/Redis (if using VirtualNetwork) ARM resource ID of a Classic Virtual Network for the redis cache to join."
                        },
                        "subnet": {
                            "oneOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
                                }
                            ],
                            "description": "Microsoft.Cache/Redis (if using VirtualNetwork) Name of a Subnet assigned to the redis cache within the virtual network."
                        },
                        "staticIP": {
                            "oneOf": [
                                {
                                    "$ref": "#/definitions/ipV4Address"
                                },
                                {
                                    "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
                                }
                            ],
                            "description": "Microsoft.Cache/Redis (if using VirtualNetwork) Static IP address that will be assigned to the redis cache within the virtual network."
                        }
                    },
                    "required": [
                        "sku"
                    ],
                    "additionalProperties": false
                }
            },
            "required": [
                "name",
                "type",
                "apiVersion",
                "properties"
            ],
            "description": "Redis cache resource"
        }
    }    
}